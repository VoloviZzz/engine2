<link rel="stylesheet" href="/css/shops-view.css">
<input type="hidden" id="js-shop-id" value="<%= shop.id -%>">
<div class="shops-page__shops-top-left shop-img">
	<% photos.forEach((photo) => { -%>
		<div class="photo" style="display: inline-block">
			<% if(user.adminMode) { %>
				<div class="admin-control-container">
					<button class="btn js-photo-delete" data-id="<%= photo.id -%>">Удалить</button>
					<button class="btn js-shopPhoto-setMainPhoto" data-id="<%= shop.id -%>" data-photo-id="<%= photo.id -%>">Сделать главным фото</button>
				</div>
			<% } %>
			<img class="setResponsiveHeight" src="<%= Helpers.replaceImageIfNotExist(`${photo.path}/prod/${photo.name}`) -%>" alt="Фото магазина">
		</div>
	<% }) -%>
</div>
<% if(user.adminMode) { %>
	<div class="admin-control-container">
		<select class="js-shop-update" data-target="alias_id" data-id="<%= shop.id -%>">
			<option value="0">Не выбрано</option>
			<% aliases.forEach(alias => { %>
				<option <%= shop.alias_id == alias.id ? 'selected' : '' -%> value="<%= alias.id -%>"><%= alias.alias -%></option>
			<% }) %>
		</select>
		<label class="btn">
			Добавить фото
			<input class="js-shopPhoto-add" multiple type="file" style="display: none">
		</label>
		<span style="display: none" id="js-photos-load-message">Идёт загрузка фото. Подождите</span>
	</div>
<% } %>
<% if(user.adminMode) { %>
	<div>
		<input class="input-text js-shopTitle-update" type="text" value="<%= shop.title -%>">
	</div>
<% } %>
<% if(user.adminMode) { %>
	<textarea class="input-text js-ckeditor-edit js-shopText-update"><%- shop.text -%></textarea>
<% } else { %>
	<div><%- Helpers.replaceLineBreaks(shop.text) -%></div>
<% } %>
<div class="shop-info-wrapper">
	<h3 class="text-center fs-regular">Контактная информация</h3>
	<div class="shops-page__shops-bottom-left shop-contacts">
		<div>
			<ul class="contacts-info-list fs-regular">
				<% if(user.adminMode) { %>
					<span>Номер телефона:</span>
					<input class="input-text js-shopPhone-update" type="text" value="<%= shop.phones.join(',') -%>">
				<% } else { %>
					<% shop.phones.forEach((phone, index) => { %>
						<li class="contacts-info__item">
							<i class="fa fa-phone tc-blue"></i>
							<span><%= phone -%></span>
						</li>
					<% }) %>
				<% } %>
				<li class="contacts-info__item tc-blue">
					<% if(user.adminMode) { %>
						<span>Адрес:</span>
						<input class="input-text js-shopAddress-update" type="text" value="<%= shop.address -%>">
					<% }
					else { %>
						<% if(shop.address) { %>
							<i class="fa fa-map-marker"></i>
							<span><%= shop.address -%></span>
						<% } %>
					<% } %>
				</li>
			</ul>
			<table class="text-center">
				<caption class="fs-regular padding-10px">График работы</caption>
				<tbody>
					<tr>
						<td>Понедельник</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="1" data-target="from"  <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['1'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="1" data-target="to"  <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['1'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Вторник</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="2" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['2'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="2" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['2'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Среда</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="3" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['3'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="3" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['3'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Четверг</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="4" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['4'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="4" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['4'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Пятница</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="5" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['5'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="5" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['5'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Суббота</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="6" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['6'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="6" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['6'][1] -%>
							</span>
						</td>
					</tr>
					<tr>
						<td>Воскресенье</td>
						<td>
							С
							<span class="js-shopSchedule-edit" data-schedule-day="7" data-target="from" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['7'][0] -%>
							</span>
							до
							<span class="js-shopSchedule-edit" data-schedule-day="7" data-target="to" <%= user.adminMode ? `contenteditable` : '' -%>>
								<%= shop.schedule['7'][1] -%>
							</span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="shops-page__shops-top-right shop-map">
		<% if(user.adminMode) { %>
			<input type="text" class="input-text js-shopCoords-update" value="<%= shop.coords -%>" placeholder="Координаты на карте">
		<% } %>
		<div id="map" data-admin="<%= user.adminMode %>" data-center="<%= shop.coords -%>" style="width: 100%; height: 100%"></div>
	</div>
</div>
<!-- <script type="text/javascript" src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script> -->
	<link rel="stylesheet" href="/vendors/leaflet/dist/leaflet.css">
<script type="text/javascript" src="/vendors/leaflet/dist/leaflet.js"></script>
<script type="text/javascript" src="/vendors/leaflet.markercluster/dist/leaflet.markercluster-src.js"></script>
<script src="/js/map.js"></script>
<script src="/js/shops-view.js" defer></script>
<% if(user.adminMode) { %>
	<script src="/admins/js/shops-view.js" defer></script>
<% } %>





































<!-- _________________ -->
